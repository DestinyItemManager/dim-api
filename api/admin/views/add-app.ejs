<% const error = locals.error; %>
<% const formData = locals.formData || {}; %>
<%- include('layout', { body: `
  <h2>Add API App</h2>

  ${error ? '<div class="alert alert-error">Error: ' + error + '</div>' : ''}

  <form method="POST" action="/admin/add-app" class="form-container">
    <div class="form-group">
      <label for="appId" class="form-label">App ID:</label>
      <input
        type="text"
        id="appId"
        name="appId"
        required
        pattern="[a-z0-9-]{3,}"
        placeholder="my-app-name"
        value="${formData.appId || ''}"
        class="form-input"
      >
      <small class="form-hint">Lowercase letters, numbers, and hyphens only. Minimum 3 characters.</small>
    </div>

    <div class="form-group">
      <label for="bungieApiKey" class="form-label">Bungie API Key:</label>
      <input
        type="text"
        id="bungieApiKey"
        name="bungieApiKey"
        required
        placeholder="xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx"
        value="${formData.bungieApiKey || ''}"
        class="form-input"
      >
    </div>

    <div class="form-group">
      <label for="origin" class="form-label">Origin URL:</label>
      <input
        type="url"
        id="origin"
        name="origin"
        required
        placeholder="https://example.com"
        value="${formData.origin || ''}"
        class="form-input"
      >
      <small class="form-hint">The full URL origin (e.g., https://example.com)</small>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-primary">Create App</button>
      <a href="/admin" class="btn btn-secondary">Cancel</a>
    </div>
  </form>
`}) %>
